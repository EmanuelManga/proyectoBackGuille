<link rel="stylesheet" href="../css/admin.css" />

<style>
    body { height: calc(100vh - var(--footer-height)); }
</style>

<main id="product-wrap" style="height:80%;">

    <div>
        <button class="btn btn-danger" onclick="borrarInactivos()">Borrar Inactivos</button>
    </div>

    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th scope="col">Nombre</th>
                <th scope="col">Apellido</th>
                <th scope="col">Email</th>
                <th scope="col">isAdmin</th>
                <th scope="col">Role</th>
                <th scope="col">Opciones</th>
            </tr>
        </thead>
        <tbody>
            {{#each users}}
                <tr>
                    <th scope="row">{{firstName}}</th>
                    <td>{{lastName}}</td>
                    <td>{{email}}</td>
                    <td>
                        <div>
                            <label >{{isAdmin}}</label>
                            <button class="btn btn-success" {{#ifEqualsId ../idActual this.id}}disabled {{else}}onclick="toggleIsAdmin('{{id}}')"{{/ifEqualsId}}><i class="bi bi-arrow-repeat" style="color: white;"></i></button>
                        </div>
                    </td>
                    <td>
                        <div style="display: flex;align-items: baseline;gap: 5px;">
                            <button class="btn btn-info" {{#ifEqualsId ../idActual this.id}}disabled{{else}}onclick="editRole('{{id}}')"{{/ifEqualsId}}><i class="bi bi-pencil-square" style="color: white;"></i></button>
                            <input type="text"  disabled value="{{role}}"{{#ifEqualsId ../idActual this.id}}{{else}}id="role-{{id}}"{{/ifEqualsId}}>
                            <button class="btn btn-info" {{#ifEqualsId ../idActual this.id}}disabled{{else}}onclick="setRole('{{id}}')"{{/ifEqualsId}}><i class="bi bi-check-circle" style="color: white;"></i></button>
                        </div>
                    </td>
                    <td>
                        <div>
                            <button class="btn btn-danger" {{#unless isAdmin}}onclick="borrarUsuario('{{id}}')"{{/unless}} {{#if isAdmin}}disabled{{/if}}><i class="bi bi-trash" style="color: white;"></i></button>
                        </div>
                    </td>
                </tr>
            {{/each}}
        </tbody>

    </table>

    

    {{! </div> }}

</main>

<script src="../js/admin.js"></script>